<div class="flex w-full h-screen bg-cover bg-center" [ngStyle]="{'background-image': selectedBackgroundImage}" loading="lazy">
  <div class="w-1/5 h-full bg-transparent bg-gray-50 bg-opacity-50">
    <div class="flex h-full bg-gray-50 bg-opacity-60 backdrop-blur-lg overflow-y-auto chat-scrollbar flex-col pt-16">
      <button *ngFor="let chat of chats; let i = index" (click)="checkIfUserIsMember(chat); setBackground(chat); selectedChat = chat"
        [ngClass]="{'shadow-md bg-gray-50 bg-opacity-45': selectedChat === chat, 'bg-opacity-0 bg-gray-100 hover:bg-opacity-30 hover:bg-gray-50 hover:shadow-sm': selectedChat !== chat}"
        class="p-3 h-16 transition-all items-center flex gap-3 focus:outline-none">
        <div class="flex gap-3 h-full w-full">
          <div class="rounded-full overflow-hidden bg-gray-500 h-full w-10 aspect-square">
            <ng-container *ngIf="chat.memberTwo.id === currentUser.id; else memberTwoTemplate">
              <img *ngIf="chat.memberOne.profilePicture" [src]="urlImage + chat.memberOne.profilePicture"
                alt="chat memberOne image" class="flex h-full object-cover w-full items-center justify-center">
              <div *ngIf="!chat.memberOne.profilePicture"
                class="flex w-full h-full justify-center items-center text-xs text-white bg-sky-600">
                {{ getUserInitials(chat.memberOne) }}
              </div>
            </ng-container>
            <ng-template #memberTwoTemplate>
              <img *ngIf="chat.memberTwo.profilePicture" [src]="urlImage + chat.memberTwo.profilePicture"
                alt="chat memberTwo image" class="flex h-full object-cover w-full items-center justify-center">
              <div *ngIf="!chat.memberTwo.profilePicture"
                class="flex w-full h-full justify-center items-center text-xs text-white bg-sky-600">
                {{ getUserInitials(chat.memberTwo) }}
              </div>
            </ng-template>
          </div>
          <div [ngClass]="{'justify-between': chat.car, 'justify-start': !chat.car }"
            class="flex flex-col h-full items-start">
            <p>{{ chat.memberOne.id === currentUser.id ? chat.memberTwo.username : chat.memberOne.username }}</p>
            <p *ngIf="chat.car" class="text-xs text-gray-800">{{ chat.car.title }}</p>
            <p *ngIf="!chat.car" class="text-xs text-gray-800">Example message...</p>
          </div>
        </div>
      </button>
    </div>
  </div>
  <div class="w-4/5 backdrop-blur-sm bg-cover bg-center" [ngStyle]="{'background-image': backgroundImage}" loading="lazy">
    <app-chat [chat]="selectedChat"></app-chat>
</div>